---
import { Image } from "astro:assets";
import ImagenLogo from "../assets/images/Logo.png";

import { fetchFromAPI } from "../lib/conection.ts"; // aca Se importa la funci√≥n de fetchFromAPI

interface Menu { // Menu de Enlaces
    label: string;
    url: string;
}

const menu: Menu[] = await fetchFromAPI('navmenus'); // aca se llaman los datos del Collection Type: navmenus
---

<header class="bg-linear-to-l from-blue-400 sticky top-0 z-50 shadow-md">
    <div class="container mx-auto px-4 py-3">
        <div class="flex justify-between items-center">
            <!-- Logo -->
            <a href="/">
                <div class="flex items-center">
                    <Image 
                        src={ImagenLogo} 
                        alt="Logo"
                        class="w-10 h-10 object-contain" 
                    />
                    <h1 class="text-xl ml-4">Tue Tech</h1>
                </div>
            </a>
            <!-- Menu de Enlaces -->
            <nav class="hidden md:flex space-x-6">
                <ul class="flex flex-row gap-x-6">
                    {menu.map((item)=> (
                        <li class="text-white hover:text-black font-medium hover:underline transition duration-300">
                            <a href={item.url}>{item.label}</a>
                        </li>
                    ))}
                </ul>
            </nav>

            <!-- Boton Hamburguesa -->
            <button id="menu-alt" class="relative w-4 h-4 flex flex-col justify-between items-center md:hidden focus:outline-none">
                <span class="block w-4 h-1 bg-gray-700 rounded transition-all duration-300 group-[.open]:rotate-45 group-[.open]:translate-y-2.5"></span>
                <span class="block h-0.5 w-4 bg-gray-700 rounded transition-all duration-300 group-[.open]:opacity-0"></span>
                <span class="block w-4 h-1 bg-gray-700 rounded transition-all duration-300 group-[.open]:rotate-45 group-[.open]:translate-y-2.5"></span>
            </button>

            <!-- Menu Celular -->
            <nav id="menu-celular" class="absolute top-16 left-0 w-full bg-white shadow-md transform scale-y-0 origin-top transition-transform duration-300 md:hidden">
                <div class="flex flex-col space-y-4 p-4">
                    {menu.map((item)=>(
                        <a href={item.url} class="text-gray-700 font-medium hover:text-blue-400 py-2 px-4 rounded hover:bg-blu-50 transition duration-300">{item.label}</a>
                    ))}
                </div>
            </nav>

        </div>
    </div>
</header>

<!-- Script para el Menu desplegable para celular -->
<script>
    const menuAlt = document.getElementById('menu-alt');
    const menuCelular = document.getElementById('menu-celular');


    if (menuAlt && menuCelular) {
        menuAlt.addEventListener('click', () => {

            menuAlt.classList.toggle('open');
            menuCelular.classList.toggle('scale-y-0');
            menuCelular.classList.toggle('scale-y-100');
        });
    }
</script>